{% extends 'layout.html' %}
{% block content %}
<h1>{% if user %}Benutzer bearbeiten{% else %}Neuer Benutzer{% endif %}</h1>
<form method="post" enctype="multipart/form-data">
  {% if not user %}
  <div class="mb-3">
    <label class="form-label">Benutzername</label>
    <input class="form-control" name="username" required>
  </div>
  {% else %}
  <div class="mb-3">
    <label class="form-label">Benutzername</label>
    <input class="form-control" value="{{ user.username }}" disabled>
  </div>
  {% endif %}
  <div class="mb-3">
    <label class="form-label">{% if user %}Neues Passwort{% else %}Passwort{% endif %}</label>
    <input type="password" class="form-control" name="password" {% if not user %}required{% endif %}>
  </div>
  <div class="mb-3">
    <label class="form-label">E-Mail</label>
    <input class="form-control" name="email" value="{{ user.email if user else '' }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Name</label>
    <input class="form-control" name="name" value="{{ user.name if user else '' }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Geschlecht</label>
    <select class="form-select" name="gender">
      <option value="" {% if not user or not user.gender %}selected{% endif %}>--</option>
      <option value="Männlich" {% if user and user.gender=='Männlich' %}selected{% endif %}>Männlich</option>
      <option value="Weiblich" {% if user and user.gender=='Weiblich' %}selected{% endif %}>Weiblich</option>
      <option value="Divers" {% if user and user.gender=='Divers' %}selected{% endif %}>Divers</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Profilbild</label>
    <input type="file" class="form-control" name="profile_image">
  </div>
  <div class="mb-3">
    <label class="form-label">Bio</label>
    <textarea class="form-control" name="bio">{{ user.bio if user else '' }}</textarea>
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="is_admin" name="is_admin" value="1" {% if user and user.is_admin %}checked{% endif %}>
    <label class="form-check-label" for="is_admin">Admin</label>
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="is_staff" name="is_staff" value="1" {% if user and user.is_staff %}checked{% endif %}>
    <label class="form-check-label" for="is_staff">Staff</label>
  </div>
  <button type="submit" class="btn btn-primary">Speichern</button>
</form>
{% endblock %}
