{% extends 'layout.html' %}
{% block content %}
<h1>Artikel</h1>
<form class="row mb-3">
  <div class="col"><input type="text" name="search" class="form-control" placeholder="Suche" value="{{ request.args.get('search','') }}"></div>
  <div class="col"><select name="category" class="form-select">
      <option value="">Alle Kategorien</option>
      {% for cat in categories %}
      <option value="{{ cat }}" {% if selected_category == cat %}selected{% endif %}>{{ cat }}</option>
      {% endfor %}
  </select></div>
  <div class="col"><button type="submit" class="btn btn-primary">Filter</button></div>
</form>
<a class="btn btn-success mb-3" href="{{ url_for('main.new_article') }}">Neuer Artikel</a>
<table class="table table-striped">
  <thead><tr><th>Name</th><th>SKU</th><th>Kategorie</th><th>Bestand</th><th>Aktionen</th></tr></thead>
  <tbody>
    {% for a in articles %}
    <tr>
      <td>{{ a.name }}</td>
      <td>{{ a.sku }}</td>
      <td>{{ a.category }}</td>
      <td>{{ a.stock }}</td>
      <td>
        <a class="btn btn-sm btn-primary" href="{{ url_for('main.edit_article', article_id=a.id) }}">Bearbeiten</a>
        <a class="btn btn-sm btn-secondary" href="{{ url_for('main.article_history', article_id=a.id) }}">Historie</a>
        {% if not enable_user_management or (current_user.is_authenticated and current_user.is_admin) %}
        <a class="btn btn-sm btn-danger" href="{{ url_for('main.delete_article', article_id=a.id) }}">LÃ¶schen</a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}